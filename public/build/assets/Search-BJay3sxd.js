import{R as p,r as T,j as e,y as h,Y as w,F as l}from"./app-CZojdjD4.js";import{T as C}from"./toast.esm-Ci78TIq9.js";import{B as o}from"./button.esm-Cv2vqUD6.js";import{T as M}from"./toolbar.esm-OLcWUjRd.js";import{M as O}from"./MessageDialog-kpj0qJ0p.js";import z from"./PreCreate-BRhRFqiv.js";import{A as G}from"./AuthenticatedLayout-B_5TWh4u.js";import{D as F,C as n}from"./column.esm-CXMPILxJ.js";import{c as b}from"./confirmpopup.esm-CVN6frEl.js";import"./iconbase.esm-DvODm2qg.js";import"./csstransition.esm-BI2IUjb-.js";import"./index.esm-BypTRDCm.js";import"./index.esm-D-5U2K2D.js";import"./ripple.esm-ByfALGiA.js";import"./TransitionGroup-_qrsneQI.js";import"./dialog.esm-BRb5edDq.js";import"./dropdown.esm-C3w7lM7_.js";import"./virtualscroller.esm-aVvJseNT.js";import"./overlayservice.esm-0R6tr4hB.js";import"./inputtextarea.esm-oIyypEZZ.js";import"./inputtext.esm-Bc9dGI99.js";import"./useSmsCounter-DY0gdP9E.js";import"./blockui.esm-CT455C9i.js";import"./accordion.esm-BkzqJAze.js";import"./index.esm-Bh2Rs3JK.js";import"./Update-C8wW_8Nu.js";import"./formik.esm-C2ZluvBh.js";import"./inputmask.esm-Dc-Zujvi.js";import"./Create-CzLwHW3D.js";import"./ApplicationLogo-C3VFVwyk.js";import"./transition-Bl2-vqQL.js";import"./inputnumber.esm-BkIM76z1.js";import"./index.esm-DSWsuiEf.js";const de=({auth:g,csrf_token:m,parameter:x,searched:k,packagesAll:P})=>{const[c,f]=p.useState(P),r=p.useRef(null),[j,v]=p.useState(!1),[N,y]=p.useState(!1),[u,d]=p.useState(!1);return T.useEffect(()=>{f(t=>t.map(s=>({...s,city_district:s.city+" / "+s.district,prepared_packer:s.prepared+" / "+s.packer})))},[]),e.jsxs(G,{user:g.user,header:"Paket Sorgulama",info:[{icon:"pi-filter",text:(x==="date"?"Tarihe Göre Filtrelendi:":"Müşteri Adına Göre Filtrelendi : ")+k},{icon:"pi-folder",text:"Toplam "+c.length+" Kayıt Bulundu."}],buttons:[{icon:"pi pi-arrow-left",tooltip:"Geri Dön",severity:"secondary",tooltipOptions:{position:"bottom"},size:"small",onClick:()=>{h.visit(route("sorgulama"))}},{icon:"pi pi-plus",tooltip:"Yeni Paket Girişi",severity:"success",tooltipOptions:{position:"bottom"},size:"small",onClick:()=>{y(!0)}},{icon:"pi pi-send",tooltip:"Yeni Mesaj Gönder",severity:"warning",tooltipOptions:{position:"bottom"},size:"small",onClick:()=>{v(!j)}}],children:[e.jsx(w,{title:"Paket Sorgulama"}),e.jsx(C,{ref:r}),e.jsx("div",{className:"py-6",children:e.jsx("div",{className:"max-w-[90rem] mx-auto sm:px-6 lg:px-8",children:e.jsxs("div",{className:"bg-white dark:bg-gray-800 overflow-hidden shadow-sm sm:rounded-lg",children:[e.jsxs(F,{value:c,removableSort:!0,paginator:!0,filterDisplay:"row",paginatorTemplate:"RowsPerPageDropdown FirstPageLink PrevPageLink CurrentPageReport NextPageLink LastPageLink",rowsPerPageOptions:[5,10,25,50],rows:10,dataKey:"id",filters:{name:{value:null,matchMode:l.CONTAINS},email:{value:null,matchMode:l.CONTAINS},phone:{value:null,matchMode:l.CONTAINS},address:{value:null,matchMode:l.CONTAINS},created_at:{value:null,matchMode:l.CONTAINS},city_district:{value:null,matchMode:l.CONTAINS},status:{value:null,matchMode:l.CONTAINS}},loading:u,header:e.jsx(e.Fragment,{children:e.jsx(M,{start:()=>e.jsxs(e.Fragment,{children:[e.jsx(o,{icon:"pi pi-sync",label:"Yeniden Yükle",loading:u,size:"small",severity:"help",tooltip:"Yeniden Yükle",tooltipOptions:{position:"top"},onClick:t=>{h.visit(route("packages.arama")+"?"+x+"="+k)},className:"mr-2"}),e.jsx(o,{icon:"pi pi-box",label:"Yeni Paketler",loading:u,size:"small",severity:"info",tooltip:"Yeni Paketler",tooltipOptions:{position:"top"},onClick:t=>{h.visit(route("packages.index"))},className:"mr-2"}),e.jsx(o,{icon:"pi pi-plus",label:"Yeni Paket Girişi",loading:u,size:"small",severity:"success",tooltip:"Yeni Paket Girişi",tooltipOptions:{position:"top"},onClick:t=>{y(!0)},className:"mr-2"})]})})}),emptyMessage:"Paket bulunamadı.",currentPageReportTemplate:"{first}. ile {last}. arası toplam {totalRecords} kayıttan",children:[e.jsx(n,{field:"id",header:"#",headerTooltip:"Veritabanı Kayıt Id"}),e.jsx(n,{field:"name",filter:!0,showFilterMenu:!1,filterPlaceholder:"Müşteri Adına Göre",sortable:!0,header:"Müşteri Adı"}),e.jsx(n,{field:"phone",filter:!0,showFilterMenu:!1,filterPlaceholder:"Telefon Numarasına Göre",sortable:!0,header:"Telefon Numarası"}),e.jsx(n,{field:"city_district",filter:!0,showFilterMenu:!1,filterPlaceholder:"İl/İlçe'ye Göre",sortable:!0,header:"İl/İlçe"}),e.jsx(n,{field:"status",filter:!0,showFilterMenu:!1,filterPlaceholder:"Statüye Göre",sortable:!0,header:"Durumu",body:t=>{if(t.status==="Beklemede")return e.jsx("span",{className:"p-tag p-tag-contrast",children:t.status});if(t.status==="Paketlendi")return e.jsx("span",{className:"p-tag p-tag-info",children:t.status});if(t.status==="Kargolandı")return e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"p-tag p-tag-success",children:t.status}),t.is_sms_sent===0&&e.jsxs(e.Fragment,{children:[e.jsx("br",{}),e.jsx("span",{className:"p-tag p-tag-danger",children:"Sms Gönderilemedi"})]})]})}}),e.jsx(n,{field:"updated_at",filter:!0,showFilterMenu:!1,filterPlaceholder:"Güncellennme Tarihine Göre",sortable:!0,header:"Güncellenme Tarihi",body:({updated_at:t})=>new Date(t).toLocaleString()}),e.jsx(n,{header:"İşlemler",body:t=>e.jsxs("div",{className:"flex justify-center gap-x-2",children:[t.is_sms_sent===0&&t.status==="Kargolandı"&&e.jsx(o,{icon:"pi pi-send",size:"small",tooltip:"Kargo Takip Sms'i Gönder",tooltipOptions:{position:"top"},severity:"help",onClick:s=>b({target:s.currentTarget,message:"Kargo Takip Sms'i Göndermek İstediğinize Emin Misiniz?",icon:"pi pi-exclamation-triangle",acceptClassName:"p-button-help",acceptLabel:"Gönder",rejectLabel:"Vazgeç",accept:()=>{d(!0),fetch(route("packages.sendSms",t.id),{method:"POST",headers:{"X-CSRF-TOKEN":m}}).then(a=>a.json()).then(a=>{a.status?(r.current.show({severity:"success",summary:"Başarılı",detail:a.message}),f(c.map(i=>(i.id===t.id&&(i.is_sms_sent=1),i)))):r.current.show({severity:"error",summary:"Hata",detail:a.message})}).catch(a=>{r.current.show({severity:"error",summary:"Hata",detail:"CSRF Token Hatası Lütfen Sayfayı Yenileyiniz.."})}).finally(()=>{d(!1)})}})}),e.jsx(o,{icon:"pi pi-eye",size:"small",tooltip:"Paketi Görüntüle",tooltipOptions:{position:"top"},severity:"info",onClick:()=>{h.visit(route("packages.show",t.record_id))}}),e.jsx(o,{icon:"pi pi-external-link",size:"small",tooltip:"Yeni Sekmede Görüntüle",tooltipOptions:{position:"top"},severity:"help",onClick:()=>{window.open(route("packages.show",t.record_id),"_blank")}}),e.jsx(o,{icon:"pi pi-trash",size:"small",tooltip:"Paket Kaydını Sil",tooltipOptions:{position:"top"},severity:"danger",onClick:s=>{let a="Paketi silmek istediğinize emin misiniz?";return t.status==="Kargolandı"&&(a="Paket kargolandığı için silmek istediğinize emin misiniz?"),b({target:s.currentTarget,message:a,icon:"pi pi-exclamation-triangle",acceptClassName:"p-button-danger",acceptLabel:"Sil",rejectLabel:"Vazgeç",accept:()=>{d(!0),fetch(route("packages.destroy",t.id),{method:"DELETE",headers:{"X-CSRF-TOKEN":m}}).then(i=>i.json()).then(i=>{i.status?(r.current.show({severity:"success",summary:"Başarılı",detail:i.message}),f(c.filter(S=>S.id!==t.id))):r.current.show({severity:"error",summary:"Hata",detail:i.message})}).catch(i=>{r.current.show({severity:"error",summary:"Hata",detail:"CSRF Token Hatası Lütfen Sayfayı Yenileyiniz.."})}).finally(()=>{d(!1)})}})}})]})})]}),e.jsx(O,{csrf_token:m,visible:j,setVisible:v,auth:g}),e.jsx(z,{visible:N,setVisible:y,csrf_token:m,toast:r,auth:g})]})})})]})};export{de as default};
