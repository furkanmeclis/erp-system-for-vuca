import{r as i,P as fe,D as P,U as ye,Z as le,c as pe,b as U,I as ve,l as he,F as j,j as t,y as be,Y as ge}from"./app-CZojdjD4.js";import{A as xe}from"./AuthenticatedLayout-B_5TWh4u.js";import{D as Ce,C as b}from"./column.esm-CXMPILxJ.js";import{B as g}from"./button.esm-Cv2vqUD6.js";import{C as Se,u as je,a as we,b as Oe,c as Pe,d as ke,e as Ee,f as Te,P as Ne,E as Me,g as Ie,T as Ae}from"./iconbase.esm-DvODm2qg.js";import{C as Re,c as _e}from"./confirmpopup.esm-CVN6frEl.js";import{T as Le}from"./toolbar.esm-OLcWUjRd.js";import{D as oe}from"./dialog.esm-BRb5edDq.js";import{T as De}from"./toast.esm-Ci78TIq9.js";import{C as ze,T as Fe}from"./csstransition.esm-BI2IUjb-.js";import{O as Z}from"./overlayservice.esm-0R6tr4hB.js";import{R as Ge}from"./ripple.esm-ByfALGiA.js";import{C as He}from"./checkbox.esm-B-mc0jlu.js";import Ue from"./Create-CzLwHW3D.js";import Ye from"./Update-C8wW_8Nu.js";import{M as Be}from"./MessageDialog-kpj0qJ0p.js";import{g as Ke}from"./helper-5dsdU7t8.js";import"./ApplicationLogo-C3VFVwyk.js";import"./transition-Bl2-vqQL.js";import"./inputnumber.esm-BkIM76z1.js";import"./inputtext.esm-Bc9dGI99.js";import"./dropdown.esm-C3w7lM7_.js";import"./virtualscroller.esm-aVvJseNT.js";import"./index.esm-BypTRDCm.js";import"./index.esm-Bh2Rs3JK.js";import"./index.esm-DSWsuiEf.js";import"./index.esm-D-5U2K2D.js";import"./TransitionGroup-_qrsneQI.js";import"./inputtextarea.esm-oIyypEZZ.js";import"./blockui.esm-CT455C9i.js";import"./formik.esm-C2ZluvBh.js";import"./inputmask.esm-Dc-Zujvi.js";import"./useSmsCounter-DY0gdP9E.js";import"./accordion.esm-BkzqJAze.js";function q(){return q=Object.assign?Object.assign.bind():function(e){for(var r=1;r<arguments.length;r++){var n=arguments[r];for(var l in n)Object.prototype.hasOwnProperty.call(n,l)&&(e[l]=n[l])}return e},q.apply(this,arguments)}function Y(e){"@babel/helpers - typeof";return Y=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},Y(e)}function Ve(e,r){if(Y(e)!=="object"||e===null)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var l=n.call(e,r||"default");if(Y(l)!=="object")return l;throw new TypeError("@@toPrimitive must return a primitive value.")}return(r==="string"?String:Number)(e)}function Xe(e){var r=Ve(e,"string");return Y(r)==="symbol"?r:String(r)}function $e(e,r,n){return r=Xe(r),r in e?Object.defineProperty(e,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[r]=n,e}function We(e){if(Array.isArray(e))return e}function Ze(e,r){var n=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(n!=null){var l,s,I,x,u=[],v=!0,C=!1;try{if(I=(n=n.call(e)).next,r!==0)for(;!(v=(l=I.call(n)).done)&&(u.push(l.value),u.length!==r);v=!0);}catch(w){C=!0,s=w}finally{try{if(!v&&n.return!=null&&(x=n.return(),Object(x)!==x))return}finally{if(C)throw s}}return u}}function se(e,r){(r==null||r>e.length)&&(r=e.length);for(var n=0,l=new Array(r);n<r;n++)l[n]=e[n];return l}function qe(e,r){if(e){if(typeof e=="string")return se(e,r);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return se(e,r)}}function Je(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function ce(e,r){return We(e)||Ze(e,r)||qe(e,r)||Je()}var Qe={root:function(r){r.props;var n=r.context;return pe("p-overlaypanel p-component",{"p-input-filled":n&&n.inputStyle==="filled"||U.inputStyle==="filled","p-ripple-disabled":n&&n.ripple===!1||U.ripple===!1})},closeIcon:"p-overlaypanel-close-icon",closeButton:"p-overlaypanel-close p-link",content:"p-overlaypanel-content",transition:"p-overlaypanel"},et=`
@layer primereact {
    .p-overlaypanel {
        position: absolute;
        margin-top: 10px;
        /* Github #3122: Prevent animation flickering  */
        top: -9999px;
        left: -9999px;
    }
    
    .p-overlaypanel-flipped {
        margin-top: -10px;
        margin-bottom: 10px;
    }
    
    .p-overlaypanel-close {
        display: flex;
        justify-content: center;
        align-items: center;
        overflow: hidden;
        position: relative;
    }
    
    /* Animation */
    .p-overlaypanel-enter {
        opacity: 0;
        transform: scaleY(0.8);
    }
    
    .p-overlaypanel-enter-active {
        opacity: 1;
        transform: scaleY(1);
        transition: transform .12s cubic-bezier(0, 0, 0.2, 1), opacity .12s cubic-bezier(0, 0, 0.2, 1);
    }
    
    .p-overlaypanel-enter-done {
        transform: none;
    }
    
    .p-overlaypanel-exit {
        opacity: 1;
    }
    
    .p-overlaypanel-exit-active {
        opacity: 0;
        transition: opacity .1s linear;
    }
    
    .p-overlaypanel:after, .p-overlaypanel:before {
        bottom: 100%;
        left: calc(var(--overlayArrowLeft, 0) + 1.25rem);
        content: " ";
        height: 0;
        width: 0;
        position: absolute;
        pointer-events: none;
    }
    
    .p-overlaypanel:after {
        border-width: 8px;
        margin-left: -8px;
    }
    
    .p-overlaypanel:before {
        border-width: 10px;
        margin-left: -10px;
    }
    
    .p-overlaypanel-flipped:after, .p-overlaypanel-flipped:before {
        bottom: auto;
        top: 100%;
    }
    
    .p-overlaypanel.p-overlaypanel-flipped:after {
        border-bottom-color: transparent;
    }
    
    .p-overlaypanel.p-overlaypanel-flipped:before {
        border-bottom-color: transparent
    }
}
`,H=Se.extend({defaultProps:{__TYPE:"OverlayPanel",id:null,dismissable:!0,showCloseIcon:!1,closeIcon:null,style:null,className:null,appendTo:null,breakpoints:null,ariaCloseLabel:null,transitionOptions:null,onShow:null,onHide:null,children:void 0,closeOnEscape:!0},css:{classes:Qe,styles:et}});function ue(e,r){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);r&&(l=l.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),n.push.apply(n,l)}return n}function tt(e){for(var r=1;r<arguments.length;r++){var n=arguments[r]!=null?arguments[r]:{};r%2?ue(Object(n),!0).forEach(function(l){$e(e,l,n[l])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ue(Object(n)).forEach(function(l){Object.defineProperty(e,l,Object.getOwnPropertyDescriptor(n,l))})}return e}var de=i.forwardRef(function(e,r){var n=je(),l=i.useContext(fe),s=H.getProps(e,l),I=i.useState(!1),x=ce(I,2),u=x[0],v=x[1],C=H.setMetaData({props:s,state:{visible:u}}),w=C.ptm,k=C.cx;C.sx;var D=C.isUnstyled;we(H.css.styles,D,{name:"overlaypanel"});var E=i.useRef(""),c=i.useRef(null),y=i.useRef(null),A=i.useRef(!1),T=i.useRef(null),S=i.useRef(null),J=Oe({target:y,overlay:c,listener:function(o,a){var m=a.type,f=a.valid;if(f)switch(m){case"outside":s.dismissable&&!A.current&&O();break;case"resize":case"scroll":case"orientationchange":L();break}A.current=!1},when:u}),B=ce(J,2),K=B[0],V=B[1],N=u&&s.closeOnEscape,M=Pe("overlay-panel",N);ke({callback:function(){O()},when:N&&M,priority:[Me.OVERLAY_PANEL,M]});var Q=function(o){return c&&c.current&&!(c.current.isSameNode(o)||c.current.contains(o))},ee=function(o,a){return y.current!=null&&y.current!==(a||o.currentTarget||o.target)},te=function(o){O(),o.preventDefault()},d=function(o){A.current=!0,Z.emit("overlay-click",{originalEvent:o,target:y.current})},X=function(){A.current=!0},R=function(o,a){u?(O(),ee(o,a)&&(y.current=a||o.currentTarget||o.target,setTimeout(function(){_(o,y.current)},200))):_(o,a)},_=function(o,a){y.current=a||o.currentTarget||o.target,u?L():(v(!0),S.current=function(m){!Q(m.target)&&(A.current=!0)},Z.on("overlay-click",S.current))},O=function(){v(!1),Z.off("overlay-click",S.current),S.current=null},$=function(){c.current.setAttribute(E.current,""),le.set("overlay",c.current,l&&l.autoZIndex||U.autoZIndex,l&&l.zIndex.overlay||U.zIndex.overlay),P.addStyles(c.current,{position:"absolute",top:"0",left:"0"}),L()},z=function(){K(),s.onShow&&s.onShow()},F=function(){V()},ie=function(){le.clear(c.current),s.onHide&&s.onHide()},L=function(){if(y.current&&c.current){P.absolutePosition(c.current,y.current);var o=P.getOffset(c.current),a=P.getOffset(y.current),m=0;o.left<a.left&&(m=a.left-o.left),c.current.style.setProperty("--overlayArrowLeft","".concat(m,"px")),o.top<a.top?(c.current.setAttribute("data-p-overlaypanel-flipped","true"),D&&P.addClass(c.current,"p-overlaypanel-flipped")):(c.current.setAttribute("data-p-overlaypanel-flipped","false"),D&&P.removeClass(c.current,"p-overlaypanel-flipped"))}},re=function(){if(!T.current){T.current=P.createInlineStyle(l&&l.nonce||U.nonce,l&&l.styleContainer);var o="";for(var a in s.breakpoints)o=o+`
                    @media screen and (max-width: `.concat(a,`) {
                        .p-overlaypanel[`).concat(E.current,`] {
                            width: `).concat(s.breakpoints[a],`;
                        }
                    }
                `);T.current.innerHTML=o}};Ee(function(){E.current=ye(),s.breakpoints&&re()}),Te(function(){T.current=P.removeInlineStyle(T.current),S.current&&(Z.off("overlay-click",S.current),S.current=null),le.clear(c.current)}),i.useImperativeHandle(r,function(){return{props:s,toggle:R,show:_,hide:O,align:L,isVisible:function(){return u},getElement:function(){return c.current}}});var W=function(){var o=n({className:k("closeIcon"),"aria-hidden":!0},w("closeIcon")),a=s.closeIcon||i.createElement(Fe,o),m=ve.getJSXIcon(a,tt({},o),{props:s}),f=s.ariaCloseLabel||he("close"),h=n({type:"button",className:k("closeButton"),onClick:function(me){return te(me)},"aria-label":f},w("closeButton"));return s.showCloseIcon?i.createElement("button",h,m,i.createElement(Ge,null)):null},ne=function(){var o=W(),a=n({id:s.id,className:pe(s.className,k("root",{context:l})),style:s.style,onClick:function(G){return d(G)}},H.getOtherProps(s),w("root")),m=n({className:k("content"),onClick:function(G){return X()},onMouseDown:X},H.getOtherProps(s),w("content")),f=n({classNames:k("transition"),in:u,timeout:{enter:120,exit:100},options:s.transitionOptions,unmountOnExit:!0,onEnter:$,onEntered:z,onExit:F,onExited:ie},w("transition"));return i.createElement(ze,q({nodeRef:c},f),i.createElement("div",q({ref:c},a),i.createElement("div",m,s.children),o))},ae=ne();return i.createElement(Ne,{element:ae,appendTo:s.appendTo})});de.displayName="OverlayPanel";function Lt({auth:e,csrf_token:r,page:n=!0}){const[l,s]=i.useState(!1),[I,x]=i.useState(null),u=i.useRef(null),v=i.useRef(null),[C,w]=i.useState({global:{value:null,matchMode:j.CONTAINS},name:{value:null,matchMode:j.CONTAINS},email:{value:null,matchMode:j.CONTAINS},phone:{value:null,matchMode:j.CONTAINS},city:{value:null,matchMode:j.CONTAINS},district:{value:null,matchMode:j.CONTAINS},address:{value:null,matchMode:j.CONTAINS},created_at:{value:null,matchMode:j.CONTAINS},updated_at:{value:null,matchMode:j.CONTAINS}}),[k,D]=i.useState(!0),[E,c]=i.useState(!1),[y,A]=i.useState(!1);i.useState("");const[T,S]=i.useState([]),[J,B]=i.useState({}),K=i.useRef(),V=i.useRef(),[N,M]=i.useState([]);i.useEffect(()=>{Ke(r).then(a=>{a.status?M(a.data):u.current.show({severity:"error",summary:"Hata",detail:"Müşteriler yüklenirken bir hata oluştu."})}).catch(a=>{console.log(a),u.current.show({severity:"error",summary:"Hata",detail:"Müşteriler yüklenirken bir hata oluştu."})}).finally(()=>D(!1))},[]);const Q=["id","name","email","phone","city","district","address","updated_at","created_at","actions"],ee={id:"ID",name:"Adı",phone:"Telefon",email:"Email",address:"Adresi",city:"Şehir",district:"İlçe",updated_at:"Güncellenme Tarihi",created_at:"Eklenme Tarihi",actions:"İşlemler"},te="ckymoto-customers-table-columns",[d,X]=Ie(["id","name","email","phone","address","updated_at","created_at","actions"],te),[R,_]=i.useState(!1),[O,$]=i.useState(!1),z=()=>{R&&_(!1)},F=()=>{O&&$(!1)},L=t.jsx(t.Fragment,{children:t.jsx(Le,{start:()=>t.jsxs(t.Fragment,{children:[t.jsx(g,{icon:"pi pi-bars",size:"small",severity:"info",tooltip:"Kolonları Yönet",tooltipOptions:{position:"top"},onClick:a=>{v.current.toggle(a)},className:"mr-2"}),T.length>0&&t.jsx(t.Fragment,{children:t.jsx(g,{size:"small",icon:"pi pi-times",className:"p-button-warning mr-2",onClick:()=>S([]),tooltip:"Seçimi Temizle",tooltipOptions:{position:"top"}})})]})})}),[re,W]=i.useState(!1),[ne,ae]=i.useState(!1),p=a=>{R||(B(a),_(!0))},o=()=>t.jsxs(t.Fragment,{children:[t.jsx(Ae,{target:".custom-target-icon"}),t.jsx(Re,{}),t.jsx(De,{ref:u}),t.jsx(de,{ref:v,children:t.jsxs("div",{className:"flex flex-col",children:[t.jsx("div",{className:"flex justify-between items-center",children:t.jsx("h3",{children:"Kolonları Yönet"})}),t.jsxs("div",{className:"flex flex-col",children:[Q.map((a,m)=>t.jsxs("div",{className:"flex my-1 items-center",children:[t.jsx(He,{inputId:a,checked:d.includes(a),onChange:f=>{let h=[...d];f.checked?h.push(a):h=h.filter(G=>G!==a),X(h)}}),t.jsx("label",{htmlFor:a,className:"ml-2",children:ee[a]})]},m)),t.jsx("div",{className:"flex justify-end mt-4",children:t.jsx(g,{label:"Kaydet",severity:"success",size:"small",onClick:()=>{v.current.hide()}})})]})]})}),t.jsxs(Ce,{value:N,removableSort:!0,paginator:!0,filterDisplay:"row",paginatorTemplate:"RowsPerPageDropdown FirstPageLink PrevPageLink CurrentPageReport NextPageLink LastPageLink",rowsPerPageOptions:[5,10,25,50],rows:10,dataKey:"id",filters:C,loading:k,globalFilterFields:["name","email","phone","address","city","district"],header:L,emptyMessage:"Müşteri bulunamadı.",currentPageReportTemplate:"{first}. ile {last}. arası toplam {totalRecords} kayıttan",children:[d.includes("id")&&t.jsx(b,{field:"id",sortable:!0,header:"#"}),d.includes("name")&&t.jsx(b,{filter:!0,showFilterMenu:!1,filterPlaceholder:"İsime Göre",field:"name",sortable:!0,header:"Adı"}),d.includes("email")&&t.jsx(b,{filter:!0,showFilterMenu:!1,filterPlaceholder:"E-mail'e Göre",field:"email",sortable:!0,header:"Email"}),d.includes("phone")&&t.jsx(b,{filter:!0,showFilterMenu:!1,filterPlaceholder:"Telefona Göre",field:"phone",sortable:!0,header:"Telefon No"}),d.includes("city")&&t.jsx(b,{filter:!0,showFilterMenu:!1,filterPlaceholder:"Şehire Göre",field:"city",sortable:!0,header:"Şehir"}),d.includes("district")&&t.jsx(b,{filter:!0,showFilterMenu:!1,filterPlaceholder:"İlçeye Göre",field:"district",sortable:!0,header:"İlçe"}),d.includes("address")&&t.jsx(b,{filter:!0,showFilterMenu:!1,filterPlaceholder:"Adrese Göre",field:"address",sortable:!0,header:"Adresi"}),d.includes("created_at")&&t.jsx(b,{field:"created_at",sortable:!0,header:"Eklenme Tarihi",filter:!0,showFilterMenu:!1,filterPlaceholder:"Eklenme Tarihine Göre",body:a=>new Date(a.created_at).toLocaleString()}),d.includes("updated_at")&&t.jsx(b,{field:"updated_at",sortable:!0,header:"Güncellenme Tarihi",filter:!0,showFilterMenu:!1,filterPlaceholder:"Güncelleme Tarihine Göre",body:a=>new Date(a.updated_at).toLocaleString()}),d.includes("actions")&&t.jsx(b,{header:"İşlemler",body:a=>t.jsxs("div",{className:"flex justify-center gap-x-2",children:[t.jsx(g,{icon:"pi pi-send",size:"small",tooltip:"Mesaj Gönder",severity:"help",tooltipOptions:{position:"top"},onClick:()=>{x({id:a.id,name:a.name}),s(!0)}}),t.jsx(g,{icon:"pi pi-pencil",size:"small",tooltip:"Müşteriyi Düzenle",tooltipOptions:{position:"top"},severity:"warning",onClick:()=>{p(a)}}),t.jsx(g,{icon:"pi pi-trash",size:"small",tooltip:"Müşteriyi Sil",tooltipOptions:{position:"top"},onClick:m=>{_e({target:m.currentTarget,message:"Müşteriyi silmek istediğinize emin misiniz?",icon:"pi pi-exclamation-triangle",acceptClassName:"p-button-danger",accept:()=>{fetch(route("customers.destroy",a.id),{method:"DELETE",headers:{"X-CSRF-TOKEN":r}}).then(f=>f.json()).then(f=>{f.status?(u.current.show({severity:"success",summary:"Başarılı",detail:f.message}),setTimeout(()=>{M(N.filter(h=>h.id!==a.id))},1e3)):u.current.show({severity:"error",summary:"Hata",detail:f.message})}).catch(f=>{u.current.show({severity:"error",summary:"Hata",detail:"CSRF Token Hatası Lütfen Sayfayı Yenileyiniz.."})})},reject:()=>{u.current.show({severity:"info",summary:"İptal Edildi",detail:"Silme işlemi iptal edildi."})},acceptLabel:"Sil",rejectLabel:"İptal"})},severity:"danger"})]})})]}),t.jsx(oe,{header:"Müşteriyi Düzenle",style:{width:"50vw"},breakpoints:{"960px":"75vw","641px":"100vw"},onHide:z,maximizable:!0,visible:R,footer:t.jsxs(t.Fragment,{children:[t.jsx(g,{label:"Vazgeç",icon:"pi pi-times",size:"small",link:!0,onClick:z,loading:E}),t.jsx(g,{label:"Kaydet",icon:"pi pi-save",size:"small",className:"p-button-success",loading:E,onClick:()=>{W(!0),K.current.click()}})]}),children:t.jsx(Ye,{updateModal:R,user:J,csrf_token:r,toast:u,onHide:z,setUsers:M,formRef:K,setFormSubmitted:W,formSubmitted:re,loading:E,setLoading:c,page:n})}),t.jsx(oe,{header:"Müşteri Ekle",style:{width:"50vw"},breakpoints:{"960px":"75vw","641px":"100vw"},onHide:F,maximizable:!0,visible:O,footer:t.jsxs(t.Fragment,{children:[t.jsx(g,{label:"Vazgeç",icon:"pi pi-times",size:"small",link:!0,onClick:F,loading:y}),t.jsx(g,{label:"Ekle",icon:"pi pi-save",size:"small",className:"p-button-success",type:"button",loading:y,onClick:()=>{ae(!0),V.current.click()}})]}),children:t.jsx(Ue,{csrf_token:r,toast:u,formSubmitted:ne,onHide:F,setUsers:M,formRef:V})})]});return t.jsxs(xe,{user:e.user,header:"Müşteri Yönetimi",info:[{icon:"pi-users",text:`Toplam ${N.length} Müşteri`},{icon:"pi-user-plus",text:`Bugün ${N.filter(a=>new Date(a.created_at).toLocaleDateString()===new Date().toLocaleDateString()).length} Müşteri Eklendi`}],buttons:[{icon:"pi pi-plus",tooltip:"Yeni Müşteri Ekle",severity:"success",tooltipOptions:{position:"bottom"},size:"small",onClick:()=>{$(!0)}},{icon:"pi pi-users",tooltip:"Grupları Görüntüle",severity:"info",tooltipOptions:{position:"bottom"},size:"small",onClick:()=>{be.visit(route("groups.index"))}},{icon:"pi pi-send",tooltip:"Yeni Mesaj Gönder",severity:"warning",tooltipOptions:{position:"bottom"},size:"small",onClick:()=>{x(null),s(!l)}}],children:[t.jsx(ge,{title:"Müşteriler"}),t.jsx("div",{className:"py-6",children:t.jsx("div",{className:"max-w-7xl mx-auto sm:px-6 lg:px-8",children:t.jsxs("div",{className:"bg-white dark:bg-gray-800 overflow-hidden shadow-sm sm:rounded-lg",children:[t.jsx(Be,{auth:e,csrf_token:r,visible:l,setVisible:s,initialCustomer:I}),t.jsx(o,{})]})})})]})}export{Lt as default};
