import{j as e}from"./app-MMx-yB3G.js";import{I as n}from"./inputtext.esm-BmSpreyY.js";import{B as g}from"./blockui.esm-CvrtRqj0.js";import{u as v}from"./formik.esm-DiYpwH7p.js";import{c as F,a as d,M as C,I as k}from"./inputmask.esm-Cb668VzC.js";import"./iconbase.esm-48fxaLvN.js";import"./index.esm-B6m0rV8L.js";import"./index.esm-vUqAtpS5.js";function z({csrf_token:h,toast:m,onHide:u,setUsers:x,formRef:j,formSubmitted:y,loading:f,setLoading:c,user:s,onSave:o=()=>{}}){const{values:t,handleSubmit:b,handleChange:l,dirty:B,setFieldValue:M,errors:p,setErrors:A}=v({initialValues:{name:s.name,email:s.email,phone:s.phone==="Belirtilmemiş"?"":s.phone,address:s.address==="Belirtilmemiş"?"":s.address,city:s.city==="Belirtilmemiş"?"":s.city,district:s.district==="Belirtilmemiş"?"":s.district},validationSchema:F().shape({name:d().required("Merkez Üyesi Adı Zorunludur."),email:d().email("Geçerli Bir E-Posta Adresi Giriniz.").required("E-Posta Adresi Zorunludur."),phone:d().required("Telefon Numarası Zorunludur."),address:d().required("Adres Zorunludur.")}),onSubmit:i=>{c(!0);let a=new FormData;a.append("name",i.name),a.append("email",i.email),a.append("phone",i.phone),a.append("address",i.address),a.append("city",i.city),a.append("district",i.district),a.append("_method","PUT"),fetch(route("customers.update",s.id),{method:"POST",headers:{"X-CSRF-TOKEN":h},body:a}).then(r=>r.json()).then(r=>{r.status?(o(!0,r.customers.find(N=>N.id===s.id)),m.current.show({severity:"success",summary:"Başarılı",detail:r.message}),x(r.customers),u()):(o(!1),m.current.show({severity:"error",summary:"Hata",detail:r.message}))}).catch(r=>{o(!1),m.current.show({severity:"error",summary:"Hata",detail:"CSRF Token Hatası Lütfen Sayfayı Yenileyiniz.."})}).finally(()=>{c(!1)})}});return e.jsx(g,{blocked:f,template:e.jsx("i",{className:"pi pi-spin pi-spinner",style:{fontSize:"3rem"}}),children:e.jsxs("form",{className:"p-fluid",onSubmit:b,children:[e.jsxs("div",{className:"grid grid-cols-2 gap-x-3 mb-3",children:[e.jsx("div",{className:"col-span-2 grid gap-y-2",children:y&&Object.keys(p).length>0&&e.jsx(e.Fragment,{children:Object.entries(p).map(([i,a])=>e.jsx(C,{severity:"warn",text:a},i))})}),e.jsxs("div",{className:"col-span-2",children:[e.jsxs("label",{htmlFor:"name",className:"font-bold",children:["Müşteri Adı ",e.jsx("span",{className:"font-semibold text-red-400",children:"*"})]}),e.jsx(n,{id:"name",name:"name",onChange:l,value:t.name||"",autoFocus:!0})]})]}),e.jsxs("div",{className:"mb-3",children:[e.jsxs("label",{htmlFor:"email",className:"font-bold",children:["Müşteri E-Posta Adresi ",e.jsx("span",{className:"font-semibold text-red-400",children:"*"})]}),e.jsx(n,{id:"email",type:"email",name:"email",readOnly:!0,disabled:!0,onChange:l,value:t.email||""})]}),e.jsxs("div",{className:"mb-3",children:[e.jsxs("label",{htmlFor:"phone",className:"font-bold",children:["Müşteri Telefon No ",e.jsx("span",{className:"font-semibold text-red-400",children:"*"})]}),e.jsx(k,{id:"phone",mask:"0599 999 99 99",name:"phone",onChange:l,value:t.phone||""})]}),e.jsxs("div",{className:"mb-3",children:[e.jsx("label",{htmlFor:"city",className:"font-bold",children:"Şehir"}),e.jsx(n,{id:"city",type:"text",name:"city",onChange:l,value:t.city||""})]}),e.jsxs("div",{className:"mb-3",children:[e.jsx("label",{htmlFor:"district",className:"font-bold",children:"İlçe"}),e.jsx(n,{id:"district",type:"text",name:"district",onChange:l,value:t.district||""})]}),e.jsxs("div",{className:"mb-3",children:[e.jsxs("label",{htmlFor:"address",className:"font-bold",children:["Müşteri Adresi ",e.jsx("span",{className:"font-semibold text-red-400",children:"*"})]}),e.jsx(n,{id:"address",type:"text",name:"address",onChange:l,value:t.address||""})]}),e.jsx("button",{type:"submit",style:{display:"none"},ref:j})]})})}export{z as default};
