import{r as o,j as e,y as g,a as P,F as l}from"./app-MMx-yB3G.js";import{M as b}from"./MessageDialog-CK2qbNEd.js";import{A as j}from"./AuthenticatedLayout-DqJQv-Zq.js";import{T as N}from"./toast.esm-Cjq_L-3x.js";import w from"./PreCreate-yxwUCMlY.js";import{D as T,C as n}from"./column.esm-BSKXtLdH.js";import{T as C}from"./toolbar.esm-Ck1JAFVg.js";import{B as c}from"./button.esm-t3q6Uns9.js";import{c as S}from"./confirmpopup.esm-bTiZjuf1.js";import{d as M}from"./helper-5dsdU7t8.js";import"./dialog.esm-BnJITAjQ.js";import"./iconbase.esm-48fxaLvN.js";import"./csstransition.esm-C7-qQLFH.js";import"./ripple.esm-CDHzLfkq.js";import"./dropdown.esm-BzwAhd2S.js";import"./virtualscroller.esm-Cs74YQWK.js";import"./overlayservice.esm-BwHVid_d.js";import"./index.esm-B6m0rV8L.js";import"./inputtextarea.esm-c6Gr0vxJ.js";import"./inputtext.esm-BmSpreyY.js";import"./useSmsCounter-COrV3HUj.js";import"./blockui.esm-CvrtRqj0.js";import"./accordion.esm-Bxv35aXX.js";import"./index.esm-Bu_OTDB3.js";import"./ApplicationLogo-7IUcid-B.js";import"./transition-Chc5_UKz.js";import"./index.esm-vUqAtpS5.js";import"./TransitionGroup-CAdOuic2.js";import"./Update-DaL_hkzX.js";import"./formik.esm-DiYpwH7p.js";import"./inputmask.esm-Cb668VzC.js";import"./Create-DQlYeJqQ.js";import"./inputnumber.esm-JaxKPWvd.js";import"./index.esm-6wxOW2yc.js";const pe=({auth:a,csrf_token:p})=>{const[k,d]=o.useState(!1),[x,y]=o.useState(!1),s=o.useRef(null),[m,u]=o.useState(!1),[f,h]=o.useState([]);return o.useEffect(()=>{M(p).then(t=>{t.status?h(t.data.map(r=>({...r,city_district:r.city+" / "+r.district}))):s.current.show({severity:"error",summary:"Hata",detail:"Paketler Getirilirken Hata Oluştu."})}).catch(t=>{console.error(t),s.current.show({severity:"error",summary:"Hata",detail:"Paketler Getirilirken Hata Oluştu."})}).finally(()=>u(!1))},[]),e.jsxs(j,{user:a.user,header:"Yeni Paketler",info:[{icon:"pi-exclamation-circle",text:"Bu sayfada sadece 'Beklemede' yani yeni giriş yapılmış olan paketleri görebilirsiniz."},{icon:"pi-box",text:f.length+" Adet Paket Beklemede"}],buttons:[{icon:"pi pi-plus",tooltip:"Yeni Paket Girişi",className:a.user.role==="worker"&&"hidden",severity:"success",tooltipOptions:{position:"bottom"},size:"small",onClick:()=>{d(!0)},loading:m},{icon:"pi pi-search",tooltip:"Paket Sorgula",className:a.user.role==="worker"&&"hidden",tooltipOptions:{position:"bottom"},size:"small",severity:"info",onClick:()=>{g.visit(route("sorgulama"))},loading:m},{icon:"pi pi-send",tooltip:"Yeni Mesaj Gönder",className:a.user.role==="worker"&&"hidden",severity:"warning",tooltipOptions:{position:"bottom"},size:"small",onClick:()=>{y(!0)},loading:m}],children:[e.jsx(P,{title:"Paket Ekle"}),e.jsx(N,{ref:s}),e.jsx("div",{className:"py-6",children:e.jsx("div",{className:"max-w-[90rem] mx-auto sm:px-6 lg:px-8",children:e.jsx("div",{className:"bg-white dark:bg-gray-800 overflow-hidden shadow-sm sm:rounded-lg",children:e.jsxs(T,{value:f,removableSort:!0,paginator:!0,filterDisplay:"row",paginatorTemplate:"RowsPerPageDropdown FirstPageLink PrevPageLink CurrentPageReport NextPageLink LastPageLink",rowsPerPageOptions:[5,10,25,50],rows:10,dataKey:"id",filters:{name:{value:null,matchMode:l.CONTAINS},email:{value:null,matchMode:l.CONTAINS},phone:{value:null,matchMode:l.CONTAINS},address:{value:null,matchMode:l.CONTAINS},created_at:{value:null,matchMode:l.CONTAINS},city_district:{value:null,matchMode:l.CONTAINS}},loading:m,header:e.jsx(e.Fragment,{children:e.jsx(C,{start:()=>e.jsx(e.Fragment,{children:a.user.role!=="worker"&&e.jsx(c,{icon:"pi pi-plus",label:"Yeni Paket Girişi",loading:m,size:"small",severity:"success",tooltip:"Yeni Paket Girişi",tooltipOptions:{position:"top"},onClick:t=>{d(!0)},className:"mr-2"})}),center:()=>e.jsx(e.Fragment,{children:a.user.role==="worker"&&e.jsx("h2",{className:"text-lg font-semibold",children:"Yeşil Buton İle Veri Girişi Yapabilirsiniz"})})})}),emptyMessage:"Paket bulunamadı.",currentPageReportTemplate:"{first}. ile {last}. arası toplam {totalRecords} kayıttan",children:[e.jsx(n,{field:"id",body:t=>e.jsx(c,{icon:"pi-id-card pi",size:"small",tooltip:"Paket'e Veri Girişi",tooltipOptions:{position:"top"},severity:"success",onClick:r=>{g.visit(route("packages.create",{id:t.id}))}})}),e.jsx(n,{field:"name",filter:!0,showFilterMenu:!1,filterPlaceholder:"Müşteri Adına Göre",sortable:!0,header:"Müşteri Adı"}),e.jsx(n,{field:"phone",filter:!0,showFilterMenu:!1,filterPlaceholder:"Telefon Numarasına Göre",sortable:!0,header:"Telefon Numarası"}),e.jsx(n,{field:"city_district",filter:!0,showFilterMenu:!1,filterPlaceholder:"İl/İlçe'ye Göre",sortable:!0,header:"İl/İlçe"}),e.jsx(n,{field:"created_at",filter:!0,showFilterMenu:!1,filterPlaceholder:"Eklenme Tarihine Göre",sortable:!0,header:"Eklenme Tarihi",body:({created_at:t})=>new Date(t).toLocaleString()}),e.jsx(n,{header:"İşlemler",body:t=>e.jsxs("div",{className:"flex justify-center gap-x-2",children:[e.jsx(c,{icon:"pi-id-card pi",size:"small",tooltip:"Paket'e Veri Girişi",tooltipOptions:{position:"top"},severity:"success",onClick:r=>{g.visit(route("packages.create",{id:t.id}))}}),e.jsx(c,{icon:"pi pi-trash",size:"small",tooltip:"Paket Kaydını Sil",tooltipOptions:{position:"top"},severity:"danger",onClick:r=>S({target:r.currentTarget,message:"Paketi silmek istediğinize emin misiniz?",icon:"pi pi-exclamation-triangle",acceptClassName:"p-button-danger",acceptLabel:"Sil",rejectLabel:"Vazgeç",accept:()=>{u(!0),fetch(route("packages.destroy",t.id),{method:"DELETE",headers:{"X-CSRF-TOKEN":p}}).then(i=>i.json()).then(i=>{i.status?(s.current.show({severity:"success",summary:"Başarılı",detail:i.message}),h(f.filter(v=>v.id!==t.id))):s.current.show({severity:"error",summary:"Hata",detail:i.message})}).catch(i=>{s.current.show({severity:"error",summary:"Hata",detail:"CSRF Token Hatası Lütfen Sayfayı Yenileyiniz.."})}).finally(()=>{u(!1)})}})})]})})]})})})}),e.jsx(b,{csrf_token:p,visible:x,setVisible:y,auth:a}),e.jsx(w,{visible:k,setVisible:d,csrf_token:p,toast:s,auth:a,onSave:(t,r)=>{t&&h(r.map(i=>({...i,city_district:i.city+" / "+i.district})))}})]})};export{pe as default};
