import{R as b,r as a,j as e,y as g,a as j}from"./app-MMx-yB3G.js";import{A as v}from"./AuthenticatedLayout-DqJQv-Zq.js";import{I as y}from"./inputtext.esm-BmSpreyY.js";import{M as S}from"./multiselect.esm-DqdTNByw.js";import{B as N}from"./button.esm-t3q6Uns9.js";import{B as w}from"./blockui.esm-CvrtRqj0.js";import{T as O}from"./toast.esm-Cjq_L-3x.js";import"./ApplicationLogo-7IUcid-B.js";import"./transition-Chc5_UKz.js";import"./iconbase.esm-48fxaLvN.js";import"./virtualscroller.esm-Cs74YQWK.js";import"./ripple.esm-CDHzLfkq.js";import"./csstransition.esm-C7-qQLFH.js";import"./index.esm-vUqAtpS5.js";import"./overlayservice.esm-BwHVid_d.js";import"./index.esm-B6m0rV8L.js";import"./TransitionGroup-CAdOuic2.js";const Y=({auth:u,csrf_token:l})=>{const o=b.useRef(null),[n,m]=a.useState(!1),[h,c]=a.useState([]),[i,d]=a.useState(""),[t,p]=a.useState(null),x=()=>{fetch(route("customers.getListForSms"),{method:"POST",headers:{"X-CSRF-TOKEN":l}}).then(s=>s.json()).then(({customers:s})=>{c(s)}).catch(s=>{c([])})};a.useEffect(()=>{x()},[]);const f=()=>{let s=new FormData;s.append("name",i),s.append("customers",t.map(r=>r.id).join(",")),m(!0),fetch(route("groups.store"),{method:"POST",headers:{"X-CSRF-TOKEN":l},body:s}).then(r=>r.json()).then(r=>{r.status?(o.current.show({severity:"success",summary:"Başarılı",detail:r.message}),p(null),d("")):o.current.show({severity:"error",summary:"Hata",detail:r.message})}).finally(()=>{m(!1)})};return e.jsxs(v,{info:[{icon:"pi-clocks",text:""}],header:"Yeni Grup Oluştur",user:u.user,buttons:[{size:"small",icon:"pi pi-arrow-left",tooltip:"Geri (Gruplar)",severity:"secondary",tooltipOptions:{position:"bottom"},onClick:()=>{g.visit(route("groups.index"))}}],children:[e.jsx(j,{title:"Yeni Grup Oluştur"}),e.jsx(O,{ref:o}),e.jsx("div",{className:"py-6",children:e.jsx("div",{className:"max-w-7xl mx-auto sm:px-6 lg:px-8",children:e.jsx("div",{className:"bg-white dark:bg-gray-800 overflow-hidden shadow-sm sm:rounded-lg",children:e.jsx(w,{blocked:n,template:e.jsx("i",{className:"pi pi-spin pi-spinner",style:{fontSize:"3rem"}}),children:e.jsxs("div",{className:"p-6 bg-white dark:bg-gray-800 border-b border-gray-200 dark:border-gray-700 p-fluid",children:[e.jsxs("div",{className:"mb-3",children:[e.jsxs("label",{htmlFor:"name",className:"font-bold",children:["Grup Adı ",e.jsx("span",{className:"font-semibold text-red-400",children:"*"})]}),e.jsx(y,{id:"name",type:"text",name:"name",value:i,onChange:s=>d(s.target.value)})]}),e.jsxs("div",{className:"mb-3",children:[e.jsxs("label",{htmlFor:"name",className:"font-bold",children:["Grup Üyeleri ",e.jsx("span",{className:"font-semibold text-red-400",children:"*"})]}),e.jsx(S,{value:t,filter:!0,virtualScrollerOptions:{itemSize:43},selectedItemsLabel:`${t==null?void 0:t.length} Müşteri Seçildi`,onChange:s=>p(s.value),options:h,optionLabel:"name",placeholder:"Müşterileri Seçiniz",maxSelectedLabels:3,className:"w-full md:w-20rem"})]}),e.jsx("div",{className:"mb-3 inline-flex",children:e.jsx(N,{label:"Kaydet",size:"small",icon:"pi pi-save",loading:n,onClick:f,disabled:i.length===0||t===null||(t==null?void 0:t.length)===0})})]})})})})})]})};export{Y as default};
