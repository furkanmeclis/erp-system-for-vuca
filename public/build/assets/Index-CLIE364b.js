import{r as s,j as e,y as o,Y as y,F as f}from"./app-CZojdjD4.js";import{A as x}from"./AuthenticatedLayout-B_5TWh4u.js";import{D as b,C as l}from"./column.esm-CXMPILxJ.js";import{B as n}from"./button.esm-Cv2vqUD6.js";import{C as j,c as v}from"./confirmpopup.esm-CVN6frEl.js";import{T as w}from"./toast.esm-Ci78TIq9.js";import{a as k}from"./helper-5dsdU7t8.js";import"./ApplicationLogo-C3VFVwyk.js";import"./transition-Bl2-vqQL.js";import"./iconbase.esm-DvODm2qg.js";import"./ripple.esm-ByfALGiA.js";import"./inputnumber.esm-BkIM76z1.js";import"./inputtext.esm-Bc9dGI99.js";import"./dropdown.esm-C3w7lM7_.js";import"./virtualscroller.esm-aVvJseNT.js";import"./csstransition.esm-BI2IUjb-.js";import"./overlayservice.esm-0R6tr4hB.js";import"./index.esm-BypTRDCm.js";import"./index.esm-Bh2Rs3JK.js";import"./index.esm-DSWsuiEf.js";import"./index.esm-D-5U2K2D.js";import"./TransitionGroup-_qrsneQI.js";const q=({auth:m,csrf_token:p})=>{const r=s.useRef(null),[d,c]=s.useState(!0),[a,u]=s.useState([]);return s.useEffect(()=>{k(p).then(t=>{t.status?u(t.data):r.current.show({severity:"error",summary:"Hata",detail:"Gruplar yüklenirken bir hata oluştu."})}).catch(t=>{console.log(t),r.current.show({severity:"error",summary:"Hata",detail:"Gruplar yüklenirken bir hata oluştu."})}).finally(()=>c(!1))},[]),e.jsxs(x,{info:[{icon:"pi-users",text:`Toplam ${a.length} Grup`}],header:"Gruplar",user:m.user,buttons:[{size:"small",icon:"pi pi-plus",tooltip:"Grup Oluştur",severity:"info",tooltipOptions:{position:"bottom"},onClick:()=>{o.visit(route("groups.create"))}}],children:[e.jsx(y,{title:"Gruplar"}),e.jsx(w,{ref:r}),e.jsx(j,{}),e.jsx("div",{className:"py-6",children:e.jsx("div",{className:"max-w-7xl mx-auto sm:px-6 lg:px-8",children:e.jsx("div",{className:"bg-white dark:bg-gray-800 overflow-hidden shadow-sm sm:rounded-lg",children:e.jsx("div",{className:"p-6 bg-white dark:bg-gray-800 border-b border-gray-200 dark:border-gray-700",children:e.jsxs(b,{value:a,removableSort:!0,paginator:!0,emptyMessage:"Grup bulunamadı.",filters:{name:{value:null,matchMode:f.CONTAINS}},loading:d,filterDisplay:"row",currentPageReportTemplate:"{first}. ile {last}. arası toplam {totalRecords} kayıttan",paginatorTemplate:"RowsPerPageDropdown FirstPageLink PrevPageLink CurrentPageReport NextPageLink LastPageLink",rowsPerPageOptions:[5,10,25,50],rows:10,dataKey:"id",children:[e.jsx(l,{field:"name",header:"Grup Adı",filter:!0,filterPlaceholder:"Grup Adına Göre Filtreleyin",showFilterMenu:!1,showAddButton:!0,sortable:!0}),e.jsx(l,{field:"membersCount",header:"Üye Sayısı",sortable:!0}),e.jsx(l,{field:"actions",header:"İşlemler",body:t=>e.jsxs("div",{className:"flex justify-end gap-x-2",children:[e.jsx(n,{size:"small",icon:"pi pi-send",severity:"info",tooltip:"Gruba Mesaj Gönder",tooltipOptions:{position:"top"},onClick:()=>{o.visit(route("groups.show",t.id))}}),e.jsx(n,{size:"small",icon:"pi pi-pencil",severity:"warning",tooltip:"Grubu Düzenle",tooltipOptions:{position:"top"},onClick:()=>{o.visit(route("groups.edit",t.id))}}),e.jsx(n,{size:"small",icon:"pi pi-trash",severity:"danger",tooltip:"Grubu Sil",tooltipOptions:{position:"top"},onClick:h=>{v({target:h.currentTarget,message:"Grubu silmek istediğinize emin misiniz?",icon:"pi pi-exclamation-triangle",acceptClassName:"p-button-danger",accept:()=>{fetch(route("groups.destroy",t.id),{method:"DELETE",headers:{"X-CSRF-TOKEN":p}}).then(i=>i.json()).then(i=>{i.status?(r.current.show({severity:"success",summary:"Başarılı",detail:i.message}),setTimeout(()=>{u(a.filter(g=>g.id!==t.id))},1e3)):r.current.show({severity:"error",summary:"Hata",detail:i.message})}).catch(i=>{r.current.show({severity:"error",summary:"Hata",detail:"CSRF Token Hatası Lütfen Sayfayı Yenileyiniz.."})})},reject:()=>{},acceptLabel:"Sil",rejectLabel:"İptal"})}})]})})]})})})})})]})};export{q as default};
