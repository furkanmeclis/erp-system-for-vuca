import{r as i,R as S,j as e,y as h,Y as N}from"./app-CZojdjD4.js";import{A as w}from"./AuthenticatedLayout-B_5TWh4u.js";import{I as C}from"./inputtext.esm-Bc9dGI99.js";import{M as k}from"./multiselect.esm-Cx8AtaZT.js";import{B as x}from"./button.esm-Cv2vqUD6.js";import{B as z}from"./blockui.esm-CT455C9i.js";import{T}from"./toast.esm-Ci78TIq9.js";import"./ApplicationLogo-C3VFVwyk.js";import"./transition-Bl2-vqQL.js";import"./iconbase.esm-DvODm2qg.js";import"./virtualscroller.esm-aVvJseNT.js";import"./ripple.esm-ByfALGiA.js";import"./csstransition.esm-BI2IUjb-.js";import"./index.esm-D-5U2K2D.js";import"./overlayservice.esm-0R6tr4hB.js";import"./index.esm-BypTRDCm.js";import"./TransitionGroup-_qrsneQI.js";const Y=({auth:f,csrf_token:n,groupEdit:b})=>{const[t,g]=i.useState(b),o=S.useRef(null),[l,m]=i.useState(!1),[j,p]=i.useState([]),[d,c]=i.useState(t.name),[r,u]=i.useState(t.members.map(s=>({id:s.id,name:s.name}))),y=()=>{fetch(route("customers.getListForSms"),{method:"POST",headers:{"X-CSRF-TOKEN":n}}).then(s=>s.json()).then(({customers:s})=>{p(s)}).catch(s=>{p([])})};i.useEffect(()=>{y()},[]);const v=()=>{let s=new FormData;s.append("name",d),s.append("customers",r.map(a=>a.id).join(",")),s.append("_method","PUT"),m(!0),fetch(route("groups.update",t.id),{method:"POST",headers:{"X-CSRF-TOKEN":n},body:s}).then(a=>a.json()).then(a=>{a.status?(o.current.show({severity:"success",summary:"Başarılı",detail:a.message}),g(a.group)):o.current.show({severity:"error",summary:"Hata",detail:a.message})}).finally(()=>{m(!1)})};return e.jsxs(w,{info:[{icon:"pi-users",text:`Toplamda ${t.members.length} Üye Bulunmaktadır.`}],header:`"${t.name}" Adlı Grubu Düzenleyin`,user:f.user,buttons:[{size:"small",icon:"pi pi-arrow-left",tooltip:"Geri (Gruplar)",severity:"secondary",tooltipOptions:{position:"bottom"},onClick:()=>{h.visit(route("groups.index"))}},{size:"small",icon:"pi pi-send",tooltip:"Mesaj Gönder",severity:"help",tooltipOptions:{position:"bottom"},onClick:()=>{h.visit(route("groups.show",t.id))}}],children:[e.jsx(N,{title:`"${t.name}" Adlı Grubu Düzenleyin`}),e.jsx(T,{ref:o}),e.jsx("div",{className:"py-6",children:e.jsx("div",{className:"max-w-7xl mx-auto sm:px-6 lg:px-8",children:e.jsx("div",{className:"bg-white dark:bg-gray-800 overflow-hidden shadow-sm sm:rounded-lg",children:e.jsx(z,{blocked:l,template:e.jsx("i",{className:"pi pi-spin pi-spinner",style:{fontSize:"3rem"}}),children:e.jsxs("div",{className:"p-6 bg-white dark:bg-gray-800 border-b border-gray-200 dark:border-gray-700 p-fluid",children:[e.jsxs("div",{className:"mb-3",children:[e.jsxs("label",{htmlFor:"name",className:"font-bold",children:["Grup Adı ",e.jsx("span",{className:"font-semibold text-red-400",children:"*"})]}),e.jsx(C,{id:"name",type:"text",name:"name",value:d,onChange:s=>c(s.target.value)})]}),e.jsxs("div",{className:"mb-3",children:[e.jsxs("label",{htmlFor:"name",className:"font-bold",children:["Grup Üyeleri ",e.jsx("span",{className:"font-semibold text-red-400",children:"*"})]}),e.jsx(k,{value:r,filter:!0,virtualScrollerOptions:{itemSize:43},selectedItemsLabel:`${r==null?void 0:r.length} Müşteri Seçildi`,onChange:s=>u(s.value),options:j,optionLabel:"name",placeholder:"Müşterileri Seçiniz",maxSelectedLabels:3,className:"w-full md:w-20rem"})]}),e.jsxs("div",{className:"mb-3 inline-flex gap-x-2",children:[e.jsx(x,{label:"Sıfırla",size:"small",icon:"pi pi-sync",loading:l,severity:"info",onClick:()=>{c(t.name),u(t.members.map(s=>({id:s.id,name:s.name})))}}),e.jsx(x,{label:"Kaydet",size:"small",icon:"pi pi-save",loading:l,severity:"success",onClick:v})]})]})})})})})]})};export{Y as default};
