import{r as s,j as e,y as o,a as y,F as f}from"./app-MMx-yB3G.js";import{A as x}from"./AuthenticatedLayout-DqJQv-Zq.js";import{D as b,C as l}from"./column.esm-BSKXtLdH.js";import{B as n}from"./button.esm-t3q6Uns9.js";import{C as j,c as v}from"./confirmpopup.esm-bTiZjuf1.js";import{T as w}from"./toast.esm-Cjq_L-3x.js";import{a as k}from"./helper-5dsdU7t8.js";import"./ApplicationLogo-7IUcid-B.js";import"./transition-Chc5_UKz.js";import"./iconbase.esm-48fxaLvN.js";import"./ripple.esm-CDHzLfkq.js";import"./inputnumber.esm-JaxKPWvd.js";import"./inputtext.esm-BmSpreyY.js";import"./dropdown.esm-BzwAhd2S.js";import"./virtualscroller.esm-Cs74YQWK.js";import"./csstransition.esm-C7-qQLFH.js";import"./overlayservice.esm-BwHVid_d.js";import"./index.esm-B6m0rV8L.js";import"./index.esm-Bu_OTDB3.js";import"./index.esm-6wxOW2yc.js";import"./index.esm-vUqAtpS5.js";import"./TransitionGroup-CAdOuic2.js";const q=({auth:m,csrf_token:p})=>{const r=s.useRef(null),[d,c]=s.useState(!0),[a,u]=s.useState([]);return s.useEffect(()=>{k(p).then(t=>{t.status?u(t.data):r.current.show({severity:"error",summary:"Hata",detail:"Gruplar yüklenirken bir hata oluştu."})}).catch(t=>{console.log(t),r.current.show({severity:"error",summary:"Hata",detail:"Gruplar yüklenirken bir hata oluştu."})}).finally(()=>c(!1))},[]),e.jsxs(x,{info:[{icon:"pi-users",text:`Toplam ${a.length} Grup`}],header:"Gruplar",user:m.user,buttons:[{size:"small",icon:"pi pi-plus",tooltip:"Grup Oluştur",severity:"info",tooltipOptions:{position:"bottom"},onClick:()=>{o.visit(route("groups.create"))}}],children:[e.jsx(y,{title:"Gruplar"}),e.jsx(w,{ref:r}),e.jsx(j,{}),e.jsx("div",{className:"py-6",children:e.jsx("div",{className:"max-w-7xl mx-auto sm:px-6 lg:px-8",children:e.jsx("div",{className:"bg-white dark:bg-gray-800 overflow-hidden shadow-sm sm:rounded-lg",children:e.jsx("div",{className:"p-6 bg-white dark:bg-gray-800 border-b border-gray-200 dark:border-gray-700",children:e.jsxs(b,{value:a,removableSort:!0,paginator:!0,emptyMessage:"Grup bulunamadı.",filters:{name:{value:null,matchMode:f.CONTAINS}},loading:d,filterDisplay:"row",currentPageReportTemplate:"{first}. ile {last}. arası toplam {totalRecords} kayıttan",paginatorTemplate:"RowsPerPageDropdown FirstPageLink PrevPageLink CurrentPageReport NextPageLink LastPageLink",rowsPerPageOptions:[5,10,25,50],rows:10,dataKey:"id",children:[e.jsx(l,{field:"name",header:"Grup Adı",filter:!0,filterPlaceholder:"Grup Adına Göre Filtreleyin",showFilterMenu:!1,showAddButton:!0,sortable:!0}),e.jsx(l,{field:"membersCount",header:"Üye Sayısı",sortable:!0}),e.jsx(l,{field:"actions",header:"İşlemler",body:t=>e.jsxs("div",{className:"flex justify-end gap-x-2",children:[e.jsx(n,{size:"small",icon:"pi pi-send",severity:"info",tooltip:"Gruba Mesaj Gönder",tooltipOptions:{position:"top"},onClick:()=>{o.visit(route("groups.show",t.id))}}),e.jsx(n,{size:"small",icon:"pi pi-pencil",severity:"warning",tooltip:"Grubu Düzenle",tooltipOptions:{position:"top"},onClick:()=>{o.visit(route("groups.edit",t.id))}}),e.jsx(n,{size:"small",icon:"pi pi-trash",severity:"danger",tooltip:"Grubu Sil",tooltipOptions:{position:"top"},onClick:h=>{v({target:h.currentTarget,message:"Grubu silmek istediğinize emin misiniz?",icon:"pi pi-exclamation-triangle",acceptClassName:"p-button-danger",accept:()=>{fetch(route("groups.destroy",t.id),{method:"DELETE",headers:{"X-CSRF-TOKEN":p}}).then(i=>i.json()).then(i=>{i.status?(r.current.show({severity:"success",summary:"Başarılı",detail:i.message}),setTimeout(()=>{u(a.filter(g=>g.id!==t.id))},1e3)):r.current.show({severity:"error",summary:"Hata",detail:i.message})}).catch(i=>{r.current.show({severity:"error",summary:"Hata",detail:"CSRF Token Hatası Lütfen Sayfayı Yenileyiniz.."})})},reject:()=>{},acceptLabel:"Sil",rejectLabel:"İptal"})}})]})})]})})})})})]})};export{q as default};
